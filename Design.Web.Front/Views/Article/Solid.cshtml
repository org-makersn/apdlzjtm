@{
    ViewBag.Title = "Viewer By GitHub";
    Layout = null;
}

<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="referrer" content="never">
    <title>Render</title>
    <link href="@Url.Content("~/Scripts/GithubRender/3d-cec88640.css")" rel="stylesheet">
    <script src="~/Scripts/jquery-2.1.3.js"></script>
    <script src="~/Scripts/html2canvas/html2canvas.js"></script>
    <script src="~/Scripts/html2canvas/jquery.plugin.html2canvas.js"></script>
</head>
<body class="is-embedded ">
    <div class="render-shell js-render-shell" data-color="0x4183c4">
        <!-- render bar -->
        <!--<div class="js-render-bar render-bar render-bar-with-modes">
            <ul class="js-view-modes render-view-modes">
                <li class="js-view-mode-item" data-mode="wireframe">Wireframe</li>
                <li class="js-view-mode-item" data-mode="normal">Surface Angle</li>
                <li class="js-view-mode-item active" data-mode="solid">Solid</li>
            </ul>
        </div>-->
        <!-- /render bar -->
        <!-- render viewport @ViewBag.FileNm-->

        @*<div class="render-viewport" id="solid-viewer" data-file="@Url.Content("~/Scripts/GithubRender/stl_file.stl")"></div>*@
        
        <div class="render-viewport" id="solid-viewer" data-file="@Url.Content("~/FileUpload/Article/article_3d/" + ViewBag.FileNm)"></div>
        <!-- /render viewport -->
    </div>

    @using(Html.BeginForm("ScreenShot", "Main", FormMethod.Post, new { @id = "form" }))
    {
        @Html.Hidden("capturedShot")

    }
  @*  <div style=" margin-top:500px;">
        <input type="button" id="btnCapture" value="Capture" />

        <input type="button" id="btnDisplay" value="View Image" />
    </div>*@
    <script src="@Url.Content("~/Scripts/GithubRender/3d-0111bb2d.js")"></script>
    <script type="text/javascript">
        //var whenReady = function (callback) {
        //    if (document.readyState === 'complete') callback(); // check not already loaded prior to this function being called
        //    else if (document.addEventListener) document.addEventListener('DOMContentLoaded', callback); // for standards compliant browsers (including IE 9+)
        //    else if (document.attachEvent) document.attachEvent('onreadystatechange', callback); // for IE 8
        //};

        //whenReady(alert('loaded'));

        //function capture() {
        //    $('#solid-viewer').html2canvas({
        //        onrendered: function (canvas) {
        //            //Set hidden field's value to image data (base-64 string)
        //            $('#img_val').val(canvas.toDataURL("image/png"));
        //            //Submit the form manually
        //            document.getElementById("myForm").submit();
        //        }
        //    });
        //}

        function here() {
            alert();
        }

        $(document).ready(function () {
            $('#btnCapture').on("click", function () {
                //captureAndUpload();
            });

            function captureAndUpload() {
                $('body').html2canvas({
                    onrendered: function (canvas) {
                        $('#capturedShot').val(canvas.toDataURL("image/png"));
                        document.getElementById("form").submit();
                    }
                });
            }
        });
    </script>
</body>
</html>
